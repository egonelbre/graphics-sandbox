<!DOCTYPE>
<html>
<head>
	<meta charset="UTF-8">
	<title>Triangle</title>
	<style>
		html { background: #111; }
		body { display: flex; }
		#container { flex: 1; background: #111; }
		#control   { min-width: 250px; margin-left: 5px; padding-left: 5px; border-left: 1px solid #333; }
	</style>
</head>

<script type="text/javascript" src="/~reload.js"></script>
<script type="text/javascript">(new Reloader()).onchanges = function(){ window.location.reload(); };</script>

<link rel="stylesheet" href="/lib/dat.gui.0.7.5.css">
<script type="text/javascript" src="/lib/dat.gui.0.7.5.js"></script>

<script type="text/javascript">
function onload(){
	"use strict";

	var gui = new dat.GUI({ autoPlace: false, resizable: true });
	document.getElementById('control').appendChild(gui.domElement);

	var canvas = document.getElementById("canvas");
	var context = canvas.getContext("2d");

	// set canvas size to the correct size
	var screenWidth = 0;
	var screenHeight = 0;
	window.onresize = function(e) {
		var width = window.innerWidth - 250 - 20 - 5;
		var height = window.innerHeight - 18;
		var targetHeight = width * 600 / 800;
		if(targetHeight > height) {
			targetHeight = height;
			width = height * 800 / 600;
		}

		screenWidth = width;
		screenHeight = targetHeight;

		canvas.width = screenWidth;
		canvas.height = screenHeight;
	};
	// update the variables
	window.onresize();

	function render() {
		window.requestAnimationFrame(render);

		context.clearRect(0, 0, screenWidth, screenHeight);
		context.font = "40px monospace";
		context.fillText(+new Date(), 100, 100);
	}
	render();
}
</script>

<body onload="onload()">
	<div id="container"><canvas id="canvas"></canvas></div>
	<div id="control"></div>
</body>

</html>